<!DOCTYPE html>

<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Na Régua</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="css/perfil.css">
    
    <script>
        window.onload = function() {
            // Carregar conteúdo da página JSP
            fetch('JavaJSP/CarregarPerfil.jsp')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('frmPerfil').innerHTML = data;
                    console.log(data);
                })
                .catch(error => console.error('Erro ao carregar o conteúdo:', error));
        
            fetch('JavaJSP/CarregarFinalizadosPerfil.jsp')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('agenda-perfil').innerHTML = data;
                    console.log(data);
                })
                .catch(error => console.error('Erro ao carregar o conteúdo:', error));
        
            fetch('JavaJSP/conteudo.jsp')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('conteudo').innerHTML = data;
                    console.log(data);
                })
        };
      
    </script>
</head>

<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-cut"></i> Na Régua
            </div>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-whatsapp"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fas fa-user"></i></a>
                <a href="JavaJSP/Logout.jsp" title="Logout"><i class="fas fa-sign-out-alt"></i></a>
            </div>
        </header>

        <nav id="conteudo">
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="./Cadastro.html">Cadastro/Consulta</a></li>
                <li><a href="./Pagamento.html">Agendamento</a></li>
            </ul>
        </nav>

        <a href="index.html"><button class="botaoVoltar">Voltar</button></a>

        <div class="content">
            <aside id="perfil-conteudo">
                <div class="container">
                    <div class="profile-icon">
                        <img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" alt="Icone de Usuário">
                    </div>
                    <form id="frmPerfil">
                        <div class="form-group">
                            <label for="name">Nome:</label>
                            <input type="text" id="name" name="nome" placeholder="Seu nome">
                        </div>
                        <div class="form-group">
                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" placeholder="Seu email">
                        </div>
                        <div class="form-group">
                            <label for="phone">Telefone:</label>
                            <input type="tel" id="phone" name="cell" placeholder="Seu telefone">
                        </div>
                    </form>
                </div>
            </aside>

            <main id="agenda-perfil">
                <h2>Cortes Agendados</h2>

                <div class="agenda-container">
                    <!-- A agenda será carregada dinamicamente aqui -->
                    <div class="appointment">
                        <img src="img/imagem 1 - teste.jpg" alt="Foto do Barbeiro">
                        <div class="appointment-info">
                            <p>Data e Hora: </p>
                            <p>Corte Escolhido:</p>
                            <p>Barbeiro Selecionado:</p>
                            <p>Forma de Pagamento:</p>
                            <p>Status:</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeModal()">&times;</span>
            <p id="mensageModal"></p>
        </div>
    </div>

    <footer>
        <p>© 2024 – Todos os Direitos Reservados</p>
    </footer>

    <script>
        // Função para obter parâmetros da URL
        function getQueryParam(msg) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(msg);
        }

        // Função para exibir o modal
        document.addEventListener("DOMContentLoaded", () => {
            const mensagem = getQueryParam("mensagem");
            if (mensagem) {
                document.getElementById("mensageModal").innerText = decodeURIComponent(mensagem);
                document.getElementById("modal").style.display = "flex";
            }
        });

        // Função para fechar o modal
        function closeModal() {
            document.getElementById("modal").style.display = "none";
        }
    </script>
</body>

</html>
